var questions = [
    {
        "question": "1. 下列何種摩擦力最小？",
        "options": [
            "A. 最大靜摩擦",
            "B. 滑動摩擦 ",
            "C. 滾動摩擦",
            "D. 極限摩擦"
        ],
        "correctAnswer": "C"
    },
    {
        "question": "2. 何種作用不是藉由摩擦力達到傳動的目的？",
        "options": [
            "A. 繩輪傳動",
            "B. 摩擦輪傳動",
            "C. 皮帶輪傳動 ",
            "D. 凸緣聯結器傳動"
        ],
        "correctAnswer": "D"
    },
    {
        "question": "3. 下列敘述，何者正確？",
        "options": [
            "A. 摩擦力與接觸面的正壓力成反比",
            "B. 接觸面積愈大摩擦力愈大",
            "C. 摩擦係數的範圍為0＜μ＜∞",
            "D. 物體的運動速度愈大摩擦力愈大"
        ],
        "correctAnswer": "C"
    },
    {
        "question": "4. 靜摩擦係數等於摩擦角的",
        "options": [
            "A. 正弦值",
            "B. 餘弦值",
            "C. 正切值",
            "D. 餘弦值"
        ],
        "correctAnswer": "C"
    },
    {
        "question": "5. 如圖所示，將一重量為30N之物體A置於一斜面上，其兩端分別用兩彈簧加以支撐，並維持靜力平衡，若彈簧一與彈簧二之受力狀態分別為受4N之壓力與8N之拉力，試問此時物體A所受之摩擦力為多少N？",
        "URL": "https://cdn.discordapp.com/attachments/1129030772154708029/1176127560904622094/image.png?ex=656dbd25&is=655b4825&hm=45d38bf065616a0a80584010d518d7a4af6d4d47b01f3f79391ff64f0507ee0e&",
        "options": [
            "",
            "A. 3",
            "B. 4",
            "C. 18",
            "D. 22"
        ],
        "correctAnswer": "A"
    },
    {
        "question": "6. 當物體置於平面，受水平推力P作用，令物體與平面之間摩擦力為f，如圖所示為水平推力P與摩擦力f之關係示意圖，下列敘述何者正確？",
        "URL": "https://cdn.discordapp.com/attachments/1129030772154708029/1176133826464976946/image.png?ex=656dc2fb&is=655b4dfb&hm=ba1513fae0d796a003dd940a2821a9c98191971720c0b228773584c0b6092e82&",
        "options": [
            "A. 在區間(I)，物體是運動的",
            "B. fb是最大靜摩擦力",
            "C. fa是動摩擦力",
            "D. θ角度一定是45°"
        ],
        "correctAnswer": "D"
    },
    {
        "question": "7. 如圖所示，一物體置於平板上，將平板逐漸升高，當上升角度為45°時，物體開始向下滑動，則此時物體與平板間之靜摩擦係數為何？",
        "URL": "https://cdn.discordapp.com/attachments/1129030772154708029/1176138312789008394/image.png?ex=656dc729&is=655b5229&hm=cf71e4459ff612b2ee8332f1a1dc22e0eb0464251f47f7c196db96a8b4a50f0a&",
        "options": [
            "A. 0.7",
            "B. 0.8",
            "C. 0.9",
            "D. 1.0"
        ],
        "correctAnswer": "D"
    },
    {
        "question": "8. 兩物體間，由滑動摩擦變為滾動摩擦，對摩擦力有什麼影響？",
        "options": [
            "A. 變大",
            "B. 變小",
            "C. 不變",
            "D. 不一定"
        ],
        "correctAnswer": "B"
    },
    {
        "question": "9. 有關摩擦下列何者正確？",
        "options": [
            "A. 物體與接觸面之摩擦力恆為定值，與物體運動狀態無關",
            "B. 摩擦力之方向與物體運動方向恆相反",
            "C. 動摩擦係數恆大於最大靜摩擦係數",
            "D. 摩擦力與接觸面積成正比"
        ],
        "correctAnswer": "B"
    },
    {
        "question": "10. 有關摩擦力與作用於物體之外力的關係，下列敘述何者正確？",
        "options": [
            "A. 一般而言，動摩擦係數大於最大靜摩擦係數",
            "B. 當外力增加時，此時摩擦力即等於動摩擦係數",
            "C. 當外力增加至物體即將發生移動時，此時的摩擦力稱為最大動摩擦係數",
            "D. 當物體產生滑動狀態時，此時的摩擦力較最大靜摩擦力小"
        ],
        "correctAnswer": "D"
    },
    {
        "question": "11. 一物體重量為W置於水平面上，靜摩擦係數為μ，若物體受一水平拉力，在物體仍然靜止未達滑動之前，其摩擦力之大小",
        "options": [
            "A. 等於μW",
            "B. 比拉力小",
            "C. 與此拉力相等",
            "D. 比拉力大"
        ],
        "correctAnswer": "C"
    },
    {
        "question": "12. 下列有關摩擦力之敘述，何者正確？",
        "options": [
            "A. 物體與摩擦面接觸面積越大摩擦力越大",
            "B. 物體靜止時並無摩擦力",
            "C. 摩擦力與物體運動方向平行",
            "D. 天氣越熱摩擦力越小"
        ],
        "correctAnswer": "C"
    },
    {
        "question": "13. 下列敘述何者正確？",
        "options": [
            "A. 動摩擦係數大於靜摩擦係數",
            "B. 靜止角正切值等於靜摩擦係數",
            "C. 接觸面越大，則摩擦力也越大",
            "D. 靜摩擦力等於靜摩擦係數乘以正向力"
        ],
        "correctAnswer": "B"
    },
    {
        "question": "14. 關於乾燥表面間的摩擦特性，依庫倫(Coulomb)之研究結果，下列敘述何者錯誤？",
        "options": [
            "A. 最大靜摩擦力與接觸面之正壓力大小成正比",
            "B. 動摩擦力與接觸面正壓力大小成正比",
            "C. 兩物體接觸面間之最大靜摩擦力與接觸面積大小成正比",
            "D. 二物體之接觸面愈粗糙，其摩擦係數愈大，摩擦力也愈大"
        ],
        "correctAnswer": "C"
    },
    {
        "question": "15. 有關乾摩擦下列敘述何者不正確？",
        "options": [
            "A. 動摩擦係數與滑動速度無關",
            "B. 摩擦力與接觸面積大小無關",
            "C. 摩擦力與接觸正壓力成正比",
            "D. 動摩擦係數大於最大靜摩擦係數"
        ],
        "correctAnswer": "D"
    },
    {
        "question": "16. 兩相互接觸之物體，其摩擦力之大小與下列何者成正比？",
        "options": [
            "A. 接觸面積之大小",
            "B. 接觸面間正壓力之大小",
            "C. 滑動速度之快慢",
            "D. 接觸時間之長短"
        ],
        "correctAnswer": "B"
    },
    {
        "question": "17. 下列有關摩擦的敘述，哪一個正確？",
        "options": [
            "A. 接觸面越大，則摩擦力越大",
            "B. 靜摩擦力等於靜摩擦係數乘以正壓力",
            "C. 螺旋之導程角α，摩擦角φ，當φ＞α時螺旋起重機才可使用",
            "D. 動摩擦力大於最大靜摩擦力"
        ],
        "correctAnswer": "C"
    },
    {
        "question": "18. 下列有關摩擦力之敘述，何者錯誤？",
        "options": [
            "A. 摩擦力的大小與接觸面的大小無關",
            "B. 摩擦力的大小與接觸面的乾濕程度無關",
            "C. 摩擦力的大小與接觸面的材質有關",
            "D. 摩擦力的大小與接觸面的粗糙度有關"
        ],
        "correctAnswer": "B"
    },
    {
        "question": "19. 下列何者敘述何者正確？",
        "options": [
            "A. 摩擦力之方向與物體運動方向相同",
            "B. 接觸面越大，則摩擦力也越大",
            "C. 靜止角正切值等於靜摩擦係數",
            "D. 靜摩擦力等於靜摩擦係數除以正向力"
        ],
        "correctAnswer": "C"
    },
    {
        "question": "20. 下列有關摩擦之敘述，何者錯誤？",
        "options": [
            "A. 動摩擦係數小於靜摩擦係數",
            "B. 摩擦角愈大，摩擦力則愈大",
            "C. 摩擦力與接觸面大小無關",
            "D. 靜止角和摩擦角常不相等"
        ],
        "correctAnswer": "D"
    },
    {
        "question": "21. 下列何者不是直線運動？",
        "options": [
            "A. 等加速度運動",
            "B. 等減速度運動",
            "C. 自由落體",
            "D. 拋射體運動"
        ],
        "correctAnswer": "D"
    },
    {
        "question": "22. 下列何種物理量不是運動學討論的範圍？",
        "options": [
            "A. 位移",
            "B. 速度",
            "C. 力",
            "D. 時間"
        ],
        "correctAnswer": "C"
    },
    {
        "question": "23. 某人在半徑為r的圓周上繞了一圈，回到原點，則其 ( 位移 #小貼心) 為",
        "options": [
            "A. 零",
            "B. 2πr",
            "C. πr",
            "D. r"
        ],
        "correctAnswer": "A"
    },
    {
        "question": "24. 某人在半徑為r的圓周上繞了一圈，回到原點，則其 ( 路徑 #小貼心) 為",
        "options": [
            "A. 零",
            "B. 2πr",
            "C. πr",
            "D. r"
        ],
        "correctAnswer": "B"
    },
    {
        "question": "25. 一物體的速度V與時間t的關係，如圖所示，下列敘述何者錯誤？",
        "URL": "https://cdn.discordapp.com/attachments/1129030772154708029/1176144509889949776/image.png?ex=656dccee&is=655b57ee&hm=9011de6b9e7c322250d5903776656af766e2f910016019f1bfa99b06db93bc03&",
        "options": [
            "A. AB段表示為等加速度運動",
            "B. BC段表示為等速度運動",
            "C. AB段表示位移和時間t的一次方成正比",
            "D. BC段表示加速度為零"
        ],
        "correctAnswer": "C"
    },
    {
        "question": "26. A、B兩車在同一條筆直公路上行駛且在同一地點，但不同時出發，兩車的速度(V)及時間(t)的關後如圖所示，則下列敘述何者錯誤？",
        "URL": "https://cdn.discordapp.com/attachments/1129030772154708029/1176145088661950524/image.png?ex=656dcd78&is=655b5878&hm=534f6580881a28e8211674277ad1b6aea353cc05e44c8ff9d2abd84fbd49e4db&",
        "options": [
            "A. A、B兩車皆做等加速度運動",
            "B. 甲點表示A、B兩車在此時間會合",
            "C. B車加速度大於A車",
            "D. A車先出發；B車再跟著出發"
        ],
        "correctAnswer": "B"
    },
    {
        "question": "27. 自由落體，落下時間經歷一秒及經歷二秒的距離比為",
        "options": [
            "A. 1：2",
            "B. 1：3",
            "C. 1：4",
            "D. 1：5 "
        ],
        "correctAnswer": "C"
    },
    {
        "question": "28. 自由落體是",
        "options": [
            "A. 等速運動",
            "B. 等加速運動",
            "C. 減速運動",
            "D. 變加速運動 "
        ],
        "correctAnswer": "B"
    },
    {
        "question": "29. 若v代表速度，a為加速度，S為位移，t表時間，則下列哪一個運動方式與圖相同？",
        "URL": "https://cdn.discordapp.com/attachments/1129030772154708029/1176146026311196752/image.png?ex=656dce58&is=655b5958&hm=4466f9be1df48dfbea241556b2e0db8e1fdbf5378f261bd70cf186b8baf870e0&",
        "options": [
            "A. https://cdn.discordapp.com/attachments/1129030772154708029/1176146119781265498/image.png?ex=656dce6e&is=655b596e&hm=9eb88b5aaea6c45453d938c69aa13ef656e282c019396e90a07d789563088994&",
            "B. https://cdn.discordapp.com/attachments/1129030772154708029/1176146199070396446/image.png?ex=656dce81&is=655b5981&hm=e9a258bbf58568264e58fc7f628eac08041c61caad91168904c5b3e71d9d170e&",
            "C. https://cdn.discordapp.com/attachments/1129030772154708029/1176146291651248218/image.png?ex=656dce97&is=655b5997&hm=580d340a63b882af120c5fb787b3e73089d8fac5d848c08819e7f843f16f0412&",
            "D. https://cdn.discordapp.com/attachments/1129030772154708029/1176146370189602927/image.png?ex=656dceaa&is=655b59aa&hm=cebe351158e7dbb26f5f8a88ef139d0259cdad440a9a1bcefa2b481c18c65395&"
        ],
        "correctAnswer": "D"
    },
    {
        "question": "30. 如圖，一物由靜止，先後自同一高度而斜度不同的光滑斜面，滑至斜面底端時，則",
        "URL": "https://cdn.discordapp.com/attachments/1129030772154708029/1176146674398269470/image.png?ex=656dcef2&is=655b59f2&hm=025ce53dac88c1995f7ddac625c1fc4dc48dce6239ae2d5acf8f23a23d3fdda0&",
        "options": [
            "A. 所需時間相同",
            "B. 末速相同",
            "C. 斜面長者末速較大",
            "D. 斜面短者末速較大"
        ],
        "correctAnswer": "B"
    },
    {
        "question": "31. 如圖所示，一火車沿直線，自甲站開至乙站，其位置時間圖中，代表等加速度運動的哪一段曲線？",
        "URL": "https://cdn.discordapp.com/attachments/1176146945673285653/1176147602417393664/image.png?ex=656dcfd0&is=655b5ad0&hm=8003b428f9cf5bc8bf6a04d0fd8221c808e777c7fb66b56023d4dddced97d9aa&",
        "options": [
            "",
            "A. OA",
            "B. AB",
            "C. BC",
            "D. OB"
        ],
        "correctAnswer": "A"
    },
    {
        "question": "32. 在沒有摩擦情況下，物體自同一高度，由靜止沿著不同斜度的光滑斜面下滑，則下列敘述何者正確？",
        "options": [
            "A. 物體滑到底端所需的時間均相同",
            "B. 物體滑到底端的末速均相同",
            "C. 斜度大者，物體滑到底端的末速大",
            "D. 斜度大者，物體滑到底端的末速小"
        ],
        "correctAnswer": "B"
    },
    {
        "question": "33. 由物體運動方程式V＝8t＋1可知其加速度為",
        "options": [
            "A. 0",
            "B. 8",
            "C. 1",
            "D. 無法判知"
        ],
        "correctAnswer": "B"
    },
    {
        "question": "34. 速度與時間之關係如圖，則其為",
        "URL": "https://cdn.discordapp.com/attachments/1176146945673285653/1176149267975520316/image.png?ex=656dd15d&is=655b5c5d&hm=424677a4333ec9c1ed42d050848f4af9ce41037fd9f0410b35553dc234598ca8&",
        "options": [
            "A. 等加速度",
            "B. 變形之等速運動",
            "C. 等加速度運動及等減速度運動",
            "D. 等加速度運動及等速運動"
        ],
        "correctAnswer": "D"
    },
    {
        "question": "35. 物體由靜止自同一高度沿不同斜度之光滑斜面下滑，滑至底端時",
        "options": [
            "A. 所需時間相同",
            "B. 末速相同",
            "C. 斜面長者末速大",
            "D. 斜面長者末速小"
        ],
        "correctAnswer": "B"
    },
    {
        "question": "36. 物體自空中自由落下，設第1秒內所行距離S1，第二秒內所行距離S2，第三秒內行S3，則S1：S2：S3為",
        "options": [
            "A. 1：4：9",
            "B. 1：2：3",
            "C. 1：1：1",
            "D. 1：3：5"
        ],
        "correctAnswer": "D"
    },
    {
        "question": "37. 自由落體運動初速為零，則下降時間與下降距離的關係為",
        "options": [
            "A. 兩者成正比",
            "B. 兩者成反比",
            "C. 時間與距離平方成正比",
            "D. 時間與距離平方根成正比"
        ],
        "correctAnswer": "D"
    },
    {
        "question": "38. 物體自由下，其第1秒、第2秒、第3秒所行距離之比為",
        "options": [
            "A. 1：2：3",
            "B. 1：2：4",
            "C. 1：3：5",
            "D. 1：3：6"
        ],
        "correctAnswer": "C"
    },
    {
        "question": "39. 在阿里山上以V0鉛直拋下一石子，同時使一棒球自由落下，則",
        "options": [
            "A. 兩者同時落地",
            "B. 石子先落地",
            "C. 棒球先落地",
            "D. 如球重大於石子重，則球先落地 "
        ],
        "correctAnswer": "B"
    },
    {
        "question": "40. 關於鉛直上拋，下列何者有誤？ ",
        "options": [
            "A. 到達最高點時，速度和加速度皆為零",
            "B. 加速度為負的重力加速度",
            "C. 上、下",
            "D. "
        ],
        "correctAnswer": "A"
    },
];

var currentQuestionIndex = 0;
var currentQuizQuestion = 0;
var correctAnswersCount = 0;
var userAnswers = [];
var isRandomizeEnabled = false;

function showQuestions() {
  document.getElementById("questionContainer").style.display = "block";
  document.getElementById("quizContainer").style.display = "none";
  displayAllQuestions();
}

function displayAllQuestions() {
  var questionContainer = document.getElementById("questionContainer");
  questionContainer.innerHTML = "";

  for (var i = 0; i < questions.length; i++) {
      var questionObj = questions[i];
  
      var questionDiv = document.createElement("div");
  
      var questionContent = document.createElement("ul");
      var questionText = questionObj.question;
  
      for (var j = 0; j < questionObj.options.length; j++) {
          var option = questionObj.options[j];
  
          if (j === 0 && questionObj.URL) {
              var image = document.createElement("img");
              image.src = questionObj.URL;
              image.style.maxWidth = "100%";
              option = image.outerHTML + '<br>' + option;
          }
          
          if (questionObj.options[j].startsWith("A.") ||
              questionObj.options[j].startsWith("B.") ||
              questionObj.options[j].startsWith("C.") ||
              questionObj.options[j].startsWith("D.")) {
              
              var optionParts = questionObj.options[j].split('. ');
              var optionText = optionParts[1];
              
              if (optionText.startsWith("https://cdn.discordapp.com/attachments")) {
                  var image = document.createElement("img");
                  image.src = optionText;
                  image.style.maxWidth = "100%";
              
                  option = image.outerHTML;
              }
          }

          if (option.charAt(0) === questionObj.correctAnswer) {
              console.log(option.charAt(0));
              option = '<span style="color:red;">' + option + '</span>';
          }
  
          questionText += document.createElement("br").outerHTML + option;
      }
  
      questionContent.innerHTML += questionText;
  
      questionDiv.appendChild(questionContent);
  
      questionContainer.appendChild(questionDiv);
  
      if (i < questions.length - 1) {
          questionContainer.appendChild(document.createElement("br"));
      }
  }
  
}


function startQuiz() {
  document.getElementById("questionContainer").style.display = "none";
  document.getElementById("quizContainer").style.display = "block";
  
  isRandomizeEnabled = document.getElementById("randomizeCheckbox").checked;
  
  if (isRandomizeEnabled) {
      shuffleQuestions();
  }
  
  currentQuizQuestion = 0;
  displayQuizQuestion();
}

function shuffleQuestions() {
  for (var i = questions.length - 1; i > 0; i--) {
      var j = Math.floor(Math.random() * (i + 1));
      var temp = questions[i];
      questions[i] = questions[j];
      questions[j] = temp;
  }
}

function previousQuestion() {
  if (currentQuizQuestion > 0) {
      currentQuizQuestion--;
      displayQuizQuestion();
  }
}

function nextQuestion() {
  if (currentQuizQuestion < questions.length - 1) {
      currentQuizQuestion++;
      displayQuizQuestion();
  }
}

function displayQuizQuestion() {
  if (currentQuizQuestion < questions.length) {
      var questionObj = questions[currentQuizQuestion];
      document.getElementById("quizQuestion").textContent = questionObj.question;

      var optionsList = document.getElementById("quizOptionsList");
      optionsList.innerHTML = "";

      var previousImage = optionsList.parentNode.querySelector("img");
      if (previousImage) {
          previousImage.remove();
      }

      for (var i = 0; i < questionObj.options.length; i++) {
          var option = questionObj.options[i];
          var listItem = document.createElement("li");
          var radioButton = '<input type="radio" name="q1" value="' + option.charAt(0) + '"> ';
          listItem.innerHTML = radioButton + option;

          listItem.querySelector("input").addEventListener("change", function () {
              userAnswers[currentQuizQuestion] = this.value;
          });

          optionsList.appendChild(listItem);
      }

      if (questionObj.URL) {
          var image = document.createElement("img");
          image.src = questionObj.URL;
          image.style.maxWidth = "100%";
          optionsList.parentNode.insertBefore(image, optionsList.nextSibling);
      }
  } else {
      document.getElementById("quizResult").textContent = "測驗完成";
      document.getElementById("quizSubmitButton").style.display = "none";
  }

  document.getElementById("previousButton").disabled = currentQuizQuestion === 0;
  document.getElementById("nextButton").disabled = currentQuizQuestion === questions.length - 1;
}

function calculateScore() {
  var resultContainer = document.getElementById("quizResult");
  resultContainer.innerHTML = "<h2>結果：</h2><ul>";

  for (var i = 0; i < questions.length; i++) {
      var questionObj = questions[i];
      var userAnswer = userAnswers[i];
      var isCorrect = userAnswer === questionObj.correctAnswer;

      var listItem = "<li>" + questionObj.question + " - <span class='" + (isCorrect ? "correct" : "incorrect") + "'>" + (isCorrect ? "正確" : "錯誤") + "</span>";

      if (!isCorrect) {
          if (questionObj.correctAnswer === 'A') {
              listItem += `<span style="color:blue;"> (正確答案:  ${questionObj.options[0]})`
          } else if (questionObj.correctAnswer === 'B') {
              listItem += `<span style="color:blue;"> (正確答案:  ${questionObj.options[1]})`
          } else if (questionObj.correctAnswer === 'C') {
              listItem += `<span style="color:blue;"> (正確答案:  ${questionObj.options[2]})`
          } else if (questionObj.correctAnswer === 'D') {
              listItem += `<span style="color:blue;"> (正確答案:  ${questionObj.options[3]})`
          }
      } else {
          correctAnswersCount++;
      }

      listItem += "</li>";

      resultContainer.innerHTML += listItem;
  }

  resultContainer.innerHTML += "</ul>";

  var scoreElement = document.getElementById("score");
  scoreElement.textContent = "答對數量: " + correctAnswersCount + "/40";
}
