var questions = [
  {
      "question": "1. 下列有關材料比例限度(proportional limit)的敘述，何者錯誤？",
      "options": [
          "A. 各種材料之比例限度皆相等",
          "B. 在比例限度以下，應力與應變成正比關係 ",
          "C. 材料之比例限度小於其降伏強度",
          "D. 在比例限度以下，當受力物體之外力去除後，該物體可以完全恢復原狀"
      ],
      "correctAnswer": "A"
  },
  {
      "question": "2. 下列有關彈性係數E之敘述，何者錯誤？",
      "options": [
          "A. E之單位和應力單位相同",
          "B. E之值為常數，不因材料之種類而改變",
          "C. 一般拉伸彈性係數等於壓縮彈性係數 ",
          "D. 彈性係數E又稱楊氏係數"
      ],
      "correctAnswer": "B"
  },
  {
      "question": "3. 在彈性限度範圍內，應力應變圖中之曲線斜率愈陡，則材料之彈性係數",
      "options": [
          "A. 愈大",
          "B. 愈小",
          "C. 相同",
          "D. 為零"
      ],
      "correctAnswer": "A"
  },
  {
      "question": "4. 一般工作應力是以降伏應力除以",
          "options": [
          "A. 彈性係數",
          "B. 蒲松氏比(ν)",
          "C. 安全因數(n)",
          "D. 應力集中因子"
      ],
      "correctAnswer": "C"
  },
  {
      "question": "5. 承受軸向拉力P之圓棒，直徑為D，長度為L，產生彈性變形後軸向伸長量為ä，則圓棒之彈性係數為",
      "options": [
          "A. ",
          "B. ",
          "C. ",
          "D. "
      ],
      "correctAnswer": "A"
  },
  {
      "question": "6. 已知某鋼索的極限應力為700 N/mm2、斷面積為100 mm2，若該鋼索可承受的最大荷重為7000 N，則該鋼索以極限強度為依據的設計安全因數為多少？",
      "options": [
          "A. 10",
          "B. 12",
          "C. 15",
          "D. 16"
      ],
      "correctAnswer": "A"
  },
  {
      "question": "7. 有一長方體尺寸為200200100 mm，若受σx500 MPa，σy−200 MPa，σz400 MPa作用，若E200 GPa，0.3，則體積應變為多少？",
      "options": [
          "A. 0.014",
          "B. 0.0014",
          "C. 0.028",
          "D. 0.0028",
      ],
      "correctAnswer": "B"
  },
  {
      "question": "8. 如圖所示，一鋼桿受到單一軸向拉力P作用，此鋼桿由兩段長度相等但斷面不同的圓柱鋼桿組成。已知AB段的斷面積是BC段斷面積的兩倍，若將此兩段圓柱鋼桿長度各減半，在受到相同的單一軸向拉力作用下，則其軸向的總變形量與原先總變形量的比值是多少？",
      "URL": "https://media.discordapp.net/attachments/1196427238166511717/1221446226118049792/image.png?ex=66129b71&is=66002671&hm=dea98588dc04d17e5ecbe991f6223f855c085b07ececf68b001a5d52254a0df3&=&format=webp&quality=lossless",
      "options": [
          "A. 1",
          "B. 0.75",
          "C. 0.5",
          "D. 0.25"
      ],
      "correctAnswer": "C"
  },
  {
      "question": "9. 如圖所示之升降機，上連鋼纜繩，升降機總負荷狀態為W10 kN，承受拉力P上升加速度為2 m/sec2，鋼纜繩之破壞強度為800 MPa，安全因數為4，試求鋼纜繩之斷面積應為若干mm2？(重力加速度gI0 m/sec2 )",
      "URL": "https://cdn.discordapp.com/attachments/1196427238166511717/1221446664863354940/image.png?ex=66129bda&is=660026da&hm=268c81176bd03dffb3bb681df19d63a58961aed7ca3024d954c87baf2578aee3&",
      "options": [
          "A. 60",
          "B. 120",
          "C. 180",
          "D. 160"
      ],
      "correctAnswer": "A"
  },
  {
      "question": "10. 一鋁合金圓桿之原始長度L200mm，蒲松氏比為0.333。若施以軸向拉力P，使圓桿產生軸向伸長ÄL0.36mm及橫向變形ÄD－0.012mm，則此圓桿的原始直徑D的值為多少mm？",
      "options": [
          "A. 2.22",
          "B. 12.20",
          "C. 20.02",
          "D. 36.30"
      ],
      "correctAnswer": "C"
  },
  {
      "question": "11. 有一直徑0.1 m、長度0.5 m之實心鋼棒，其蒲松氏比為0.25，彈性係數為21 GPa，求其體積彈性係數為何？",
      "options": [
          "A. 13 GPa",
          "B. 13.5 GPa",
          "C. 14 GPa",
          "D. 14.5 GPa"
      ],
      "correctAnswer": "C"
  },
  {
      "question": "12. 將書本自裝訂側捲起，未裝訂之一側成斜面排列，是因為紙張滑動，而促成此滑動之力是",
      "options": [
          "A. 拉力",
          "B. 壓力",
          "C. 剪力",
          "D. 扭矩"
      ],
      "correctAnswer": "C"
  },
  {
      "question": "13. 一均質圓柱承受一軸向拉力，則在45°斜截面上之剪應力的特性為",
      "options": [
          "A. 最小且等於最大正向應力之半",
          "B. 最小且等於最大正向應力",
          "C. 最大且等於最大正向應力之二倍",
          "D. 最大且等於最大正向應力之半"
      ],
      "correctAnswer": "D"
  },
  {
      "question": "14. 如圖所示，斷面積為A且承受軸向拉力P之桿件，若圖示之傾斜面mn上之正向應力及剪應力分別為敘述何者錯誤？",
      "options": [
          "A. 在è = 0°時，有最大正向應力，=",
          "B. 在è = 45°時，= (C)在è= 45°時，有最大剪應力，=",
          "C. 在è= 45°時，有最大剪應力，=",
          "D. 在è = 90°時，= 0"
      ],
      "correctAnswer": "C"
  },
  {
      "question": "15. 某材料承受雙軸向力及時，若，則此材料在45°的斜截面上之最大剪應力為",
      "options": [
          "A. ",
          "B. ",
          "C. ",
          "D. "
      ],
      "correctAnswer": "A"
  },
  {
      "question": "16. 如圖所示，一正方形桿件(40 mm40 mm)，二端受軸向負荷160 kN作用，試求與橫斷面逆時針成15°之mn截面之剪應力為多少MPa？",
      "URL": "https://cdn.discordapp.com/attachments/1196427238166511717/1221450654166417468/image.png?ex=66129f91&is=66002a91&hm=07e7a4d1385d7a59f63fac45955afd75d13afe8f57b9cc756143156faa0867c0&",
      "options": [
          "A. 20",
          "B. 25",
          "C. 30",
          "D. 35"
      ],
      "correctAnswer": "B"
  },
  {
      "question": "17. 一正方形之物體,在四邊各承受一剪力F,如圖所示,試問該物體內部剖在45°斜面位置(虛線所示)之剪力為何?",
      "URL" : "https://media.discordapp.net/attachments/1196427238166511717/1221451082803449967/image.png?ex=66129ff7&is=66002af7&hm=da85f62b168002b4ce36af78f36061fa685a2cb48fe1799a945f77e5c3e7d01e&=&format=webp&quality=lossless",
      "options": [
          "A. 2F",
          "B. F",
          "C. F2",
          "D. 0"
      ],
      "correctAnswer": "D"
  },
  {
      "question": "18. 某一點之應力如圖所示,則45°傾斜面上之應力",
      "URL" : "https://cdn.discordapp.com/attachments/1196427238166511717/1221451790365491200/image.png?ex=6612a0a0&is=66002ba0&hm=265a56daa5dafe8ad50dc9699f9a671853a321397a35d0beb407cabd67f5c6d6&",
      "options": [
          "A. ",
          "B. ",
          "C. ",
          "D. "
      ],
      "correctAnswer": "B"
  },
  {
      "question": "19. 某材料之彈性係數E = 200GPa,剪割彈性係數G = 80GPa,則其蒲松式比ν為",
      "options": [
          "A. 0.2",
          "B. 0.25",
          "C. 0.3",
          "D. 0.35"
      ],
      "correctAnswer": "B"
  },
  {
      "question": "20. 如圖所示,利用三個相同之鉚釘將三塊板材接合,若鉚釘之直徑為30 mm,且其鉚釘最大可承受之剪應力為60 MPa,若欲鉚釘不被剪斷,則施力P最大不得超過多少kN?",
      "URL" : "https://cdn.discordapp.com/attachments/1196427238166511717/1221452411013697626/image.png?ex=6612a134&is=66002c34&hm=9e830afde959e07971317d813866507f753cf39f8b4c5dd7d98a577bf3be2e9f&",
      "options": [
          "A. 83",
          "B. 125",
          "C. 254",
          "D. 368"
      ],
      "correctAnswer": "C"
  },
  {
      "question": "21. 設計一橫斷面積100 mm2的金屬圓桿,兩端承受拉力作用,已知圓桿可承受最大拉應力60 MPa,最大剪應力25 MPa,則容許兩端最大拉力為多少N?",
      "options": [
          "A. 5000",
          "B. 5500",
          "C. 6000",
          "D. 6500"
      ],
      "correctAnswer": "A"
  },
  {
      "question": "22. 矩形面積如圖所示,則其對x軸的斷面模數為何?",
      "URL": "https://cdn.discordapp.com/attachments/1196427238166511717/1221452909842006026/image.png?ex=6612a1ab&is=66002cab&hm=fb69caf5ea9764df57c44b24b4ffb1da133422a490057486a799c255f601bdc6&",
      "options": [
          "A. ",
          "B. ",
          "C. ",
          "D. "
      ],
      "correctAnswer": "D"
  },
  {
      "question": "23. 一圓形截面直徑為d,則圓面積對圓心之極慣性矩為",
      "options": [
          "A. ",
          "B. ",
          "C. ",
          "D. "
      ],
      "correctAnswer": "B"
  },
  {
      "question": "24. 如圖所示,塗色區域對x軸之慣性矩為若干cm4?(TA)",
      "URL": "https://cdn.discordapp.com/attachments/1196427238166511717/1221453404300382240/image.png?ex=6612a221&is=66002d21&hm=a0c91bed4464196a1f2fd32947087b97a235c7aa4334d2dbbf4d6ed363059000&",
      "options": [
          "A. 54",
          "B. 144",
          "C. 162",
          "D. 198"
      ],
      "correctAnswer": "C"
  },
  {
      "question": "25. 如圖之塗色面積,對形心軸x-x之慣性矩為",
      "URL": "https://media.discordapp.net/attachments/1196427238166511717/1221453618931302430/image.png?ex=6612a254&is=66002d54&hm=55c0cedc7e3a0d676a271196674fdd230b3a88dc10d7ecaa6206f2b789425aa3&=&format=webp&quality=lossless",
      "options": [
          "A. ",
          "B. ",
          "C. ",
          "D. "
      ],
      "correctAnswer": "C"
  },
  {
      "question": "26. 如圖所示,塗色部分對形心軸之慣性矩為若干mm4?",
      "URL" : "https://cdn.discordapp.com/attachments/1196427238166511717/1221453884002930788/image.png?ex=6612a293&is=66002d93&hm=e4063967daac2bd32e3547135d4ec07af763feb7f4ce6d548a4b46b2412d14d3&",
      "options": [
          "A. Ix=Iy=742",
          "B. Ix=Iy=803",
          "C. Ix=Iy=468",
          "D. Ix=Iy=278"
      ],
      "correctAnswer": "B"
  },
  {
      "question": "27. 如圖所示斷面,其底部s軸之慣性矩為若干cm4?",
      "options": [
          "A. 128",
          "B. 136",
          "C. 144",
          "D. 156 "
      ],
      "correctAnswer": "B"
  },
  {
      "question": "28. 如圖所示,試求該斷面對x軸的面積慣性矩Ix為多少?",
      "options": [
          "A. ",
          "B. ",
          "C. ",
          "D.  "
      ],
      "correctAnswer": "C"
  },
  {
      "question": "29. 如圖所示之截面,G為其形心,面積為600 mm2。已知其對u-u軸的慣性矩為71250 mm4,則對x軸的慣性矩為多少mm4?",
      "URL" : "https://cdn.discordapp.com/attachments/1196427238166511717/1221454469406134323/image.png?ex=6612a31f&is=66002e1f&hm=82a7ed4e7b7c092063c86a8ba3b3e3e1a15c6dfcb7e8247def69010a319be5e7&",
      "options": [
          "A. 7500",
          "B. 8750",
          "C. 10000",
          "D. 11250 "
      ],
      "correctAnswer": "D"
  },
  {
      "question": "30. 如圖所示為樑之橫斷面,試求該斷面對通過形心之水平軸的面積慣性矩為多少?",
      "URL" : "https://cdn.discordapp.com/attachments/1196427238166511717/1221454731231236156/image.png?ex=6612a35d&is=66002e5d&hm=631b7d9063c2de519b1c9148d7719101f93e055a48802a12407394af1477a091&",
      "options": [
          "A. 10 a4",
          "B. 8.5 a4",
          "C. 6.5 a4",
          "D. 4 a4"
      ],
      "correctAnswer": "B"
  },
  {
      "question": "31. 一矩形樑其斷面寬為b,高為h,若承受一彎矩M,則其最大應力為",
      "options": [
          "A. ",
          "B. ",
          "C. ",
          "D. "
      ],
      "correctAnswer": "B"
  },
  {
      "question": "32. 一懸臂樑受一彎矩M作用,樑材料之彈性係數為E,樑橫斷面之慣性矩為I,則彈性曲線之曲率",
      "options": [
          "A. ",
          "B. ",
          "C. ",
          "D. "
      ],
      "correctAnswer": "A"
  },
  {
      "question": "33. 於自由端受集中負荷P之懸臂樑,則",
      "options": [
          "A. 固定端剪力最大",
          "B. 自由端彎矩最大",
          "C. 樑表面剪應力最大",
          "D. 中性軸剪應力最大"
      ],
      "correctAnswer": "D"
  },
  {
      "question": "34. 下列敘述何者錯誤?",
      "options": [
          "A. 矩形樑剖面最大剪應力恰為平均剪應力的1.5倍",
          "B. 矩形樑邊變為原來兩倍,則最大剪應力變為原來四倍",
          "C. 圓形樑剖面大剪應力恰為平均剪應力的1.33倍",
          "D. 樑中立軸上具有最大剪應力"
      ],
      "correctAnswer": "B"
  },
  {
      "question": "35. 如圖所示,承受集中負載P1及P2作用,則其臨界斷面位於",
      "URL" : "https://cdn.discordapp.com/attachments/1196427238166511717/1221455677248114728/image.png?ex=6612a43f&is=66002f3f&hm=49d4f038ef3e3b6b7256f73f7c2c87dc46c979b681559bd7bea43624c8ac86b2&",
      "options": [
          "A. A處",
          "B. B處",
          "C. B處",
          "D. D處"
      ],
      "correctAnswer": "C"
  },
  {
      "question": "36. 如圖所示之樑,A點右方1 m處樑斷面上之彎矩為若干N-m?",
      "URL" : "https://cdn.discordapp.com/attachments/1196427238166511717/1221455860916682862/image.png?ex=6612a46a&is=66002f6a&hm=58e423dc1833bd19071c64a26213dbf57811086b2e381371cd39e45be82e0e18&",
      "options": [
          "A. 40",
          "B. 320",
          "C. 640",
          "D. 960"
      ],
      "correctAnswer": "A"
  },
  {
      "question": "37. 如圖所示之樑,試求C點之彎矩大小為若干N-m?",
      "URL" : "https://cdn.discordapp.com/attachments/1196427238166511717/1221456230413897778/image.png?ex=6612a4c2&is=66002fc2&hm=fd9e76eabad84364370d3fc45972dd9bc990de39d7126a07fb5eded3e9b70d5b&",
      "options": [
          "A. 110",
          "B. 220",
          "C. 330",
          "D. 450"
      ],
      "correctAnswer": "B"
  },
  {
    "question": "38. 在懸臂樑的自由端受一60 N的集中負載與一60 N-m的彎矩負載作用,如圖所示,則此樑的最大彎曲力矩是多少N-m?",
    "URL": "https://cdn.discordapp.com/attachments/1196427238166511717/1221456625551020112/image.png?ex=6612a521&is=66003021&hm=8655a8d04e5be8cf9862bd5ee7746f47fa068472ca693d9a906b571ad6748925&",
    "options": [
        "A. 120",
        "B. 80",
        "C. 60",
        "D. 40 "
    ],
    "correctAnswer": "C"
},
  {
      "question": "39. 將一直徑2 mm之鋼線繞於直徑2 m之圓柱上而保持彈性變形。若鋼線之彈性係數E=200 GPa,則在鋼線表面產生之最大彎曲應力約為若干MPa?",
      "options": [
          "A. 100",
          "B. 200",
          "C. 300",
          "D. 400"
      ],
      "correctAnswer": "B"
  },
  {
      "question": "40. 如圖所示,均質斷面之樑,若其最大彎矩為162 N-m,容許彎曲應力為90 MPa,寬為12 mm,則其最小安全h值應為若干mm?",
      "URL" : "https://cdn.discordapp.com/attachments/1196427238166511717/1221456819097043095/image.png?ex=6612a54f&is=6600304f&hm=c1e3864bd5875d2e0694b405166ac3d9d1213157f6388a67837647408ea45ed8&",
      "options": [
          "A. 25",
          "B. 30",
          "C. 40",
          "D. 45"
      ],
      "correctAnswer": "B"
  },
];

var currentQuestionIndex = 0;
var currentQuizQuestion = 0;
var correctAnswersCount = 0;
var userAnswers = [];
var isRandomizeEnabled = false;

function showQuestions() {
  document.getElementById("questionContainer").style.display = "block";
  document.getElementById("quizContainer").style.display = "none";
  displayAllQuestions();
}

function displayAllQuestions() {
  var questionContainer = document.getElementById("questionContainer");
  questionContainer.innerHTML = "";

  for (var i = 0; i < questions.length; i++) {
      var questionObj = questions[i];
  
      var questionDiv = document.createElement("div");
  
      var questionContent = document.createElement("ul");
      var questionText = questionObj.question;
  
      for (var j = 0; j < questionObj.options.length; j++) {
          var option = questionObj.options[j];
  
          if (j === 0 && questionObj.URL) {
              var image = document.createElement("img");
              image.src = questionObj.URL;
              image.style.maxWidth = "100%";
              option = image.outerHTML + '<br>' + option;
          }
          
          if (questionObj.options[j].startsWith("A.") ||
              questionObj.options[j].startsWith("B.") ||
              questionObj.options[j].startsWith("C.") ||
              questionObj.options[j].startsWith("D.")) {
              
              var optionParts = questionObj.options[j].split('. ');
              var optionText = optionParts[1];
              
              if (optionText.startsWith("https://cdn.discordapp.com/attachments")) {
                  var image = document.createElement("img");
                  image.src = optionText;
                  image.style.maxWidth = "100%";
              
                  option = image.outerHTML;
              }
          }

          if (option.charAt(0) === questionObj.correctAnswer) {
              console.log(option.charAt(0));
              option = '<span style="color:red;">' + option + '</span>';
          }
  
          questionText += document.createElement("br").outerHTML + option;
      }
  
      questionContent.innerHTML += questionText;
  
      questionDiv.appendChild(questionContent);
  
      questionContainer.appendChild(questionDiv);
  
      if (i < questions.length - 1) {
          questionContainer.appendChild(document.createElement("br"));
      }
  }
  
}


function startQuiz() {
  document.getElementById("questionContainer").style.display = "none";
  document.getElementById("quizContainer").style.display = "block";
  
  isRandomizeEnabled = document.getElementById("randomizeCheckbox").checked;
  
  if (isRandomizeEnabled) {
      shuffleQuestions();
  }
  
  currentQuizQuestion = 0;
  displayQuizQuestion();
}

function shuffleQuestions() {
  for (var i = questions.length - 1; i > 0; i--) {
      var j = Math.floor(Math.random() * (i + 1));
      var temp = questions[i];
      questions[i] = questions[j];
      questions[j] = temp;
  }
}

function previousQuestion() {
  if (currentQuizQuestion > 0) {
      currentQuizQuestion--;
      displayQuizQuestion();
  }
}

function nextQuestion() {
  if (currentQuizQuestion < questions.length - 1) {
      currentQuizQuestion++;
      displayQuizQuestion();
  }
}

function displayQuizQuestion() {
  if (currentQuizQuestion < questions.length) {
      var questionObj = questions[currentQuizQuestion];
      document.getElementById("quizQuestion").textContent = questionObj.question;

      var optionsList = document.getElementById("quizOptionsList");
      optionsList.innerHTML = "";

      var previousImage = optionsList.parentNode.querySelector("img");
      if (previousImage) {
          previousImage.remove();
      }

      for (var i = 0; i < questionObj.options.length; i++) {
          var option = questionObj.options[i];
          var listItem = document.createElement("li");
          var radioButton = '<input type="radio" name="q1" value="' + option.charAt(0) + '"> ';
          listItem.innerHTML = radioButton + option;

          listItem.querySelector("input").addEventListener("change", function () {
              userAnswers[currentQuizQuestion] = this.value;
          });

          optionsList.appendChild(listItem);
      }

      if (questionObj.URL) {
          var image = document.createElement("img");
          image.src = questionObj.URL;
          image.style.maxWidth = "100%";
          optionsList.parentNode.insertBefore(image, optionsList.nextSibling);
      }
  } else {
      document.getElementById("quizResult").textContent = "測驗完成";
      document.getElementById("quizSubmitButton").style.display = "none";
  }

  document.getElementById("previousButton").disabled = currentQuizQuestion === 0;
  document.getElementById("nextButton").disabled = currentQuizQuestion === questions.length - 1;
}

function calculateScore() {
  var resultContainer = document.getElementById("quizResult");
  resultContainer.innerHTML = "<h2>結果：</h2><ul>";

  for (var i = 0; i < questions.length; i++) {
      var questionObj = questions[i];
      var userAnswer = userAnswers[i];
      var isCorrect = userAnswer === questionObj.correctAnswer;

      var listItem = "<li>" + questionObj.question + " - <span class='" + (isCorrect ? "correct" : "incorrect") + "'>" + (isCorrect ? "正確" : "錯誤") + "</span>";

      if (!isCorrect) {
          if (questionObj.correctAnswer === 'A') {
              listItem += `<span style="color:blue;"> (正確答案:  ${questionObj.options[0]})`
          } else if (questionObj.correctAnswer === 'B') {
              listItem += `<span style="color:blue;"> (正確答案:  ${questionObj.options[1]})`
          } else if (questionObj.correctAnswer === 'C') {
              listItem += `<span style="color:blue;"> (正確答案:  ${questionObj.options[2]})`
          } else if (questionObj.correctAnswer === 'D') {
              listItem += `<span style="color:blue;"> (正確答案:  ${questionObj.options[3]})`
          }
      } else {
          correctAnswersCount++;
      }

      listItem += "</li>";

      resultContainer.innerHTML += listItem;
  }

  resultContainer.innerHTML += "</ul>";

  var scoreElement = document.getElementById("score");
  scoreElement.textContent = "答對數量: " + correctAnswersCount + "/40";
}
