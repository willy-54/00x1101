var questions = [
  {
      "question": "1. 下列何者不是角速度的單位？",
      "options": [
          "A. rpm",
          "B. rps ",
          "C. rad/sec",
          "D. cm/sec"
      ],
      "correctAnswer": "D"
  },
  {
      "question": "2. 物體作等速率圓周運動時，其運動情形是屬於",
      "options": [
          "A. 等速度運動",
          "B. 便速率運動",
          "C. 變速度運動 ",
          "D. 等加速度運動"
      ],
      "correctAnswer": "C"
  },
  {
      "question": "3. 一個物體作圓周運動，若在切線方向有加速度存在，這是由於物體什麼改變所產生的",
      "options": [
          "A. 切線速度的大小改變",
          "B. 位置改變",
          "C. 切線速度的方向改變",
          "D. 路徑的改變"
      ],
      "correctAnswer": "A"
  },
  {
      "question": "4. 一圓球於平面上做等速率的圓周運動，其向心加速度是由何者改變而產生？",
          "options": [
          "A. 切線速度的大小",
          "B. 切線速度的方向",
          "C. 角加速度的大小",
          "D. 角速度的大小"
      ],
      "correctAnswer": "B"
  },
  {
      "question": "5. 轉一圈等於多少弧度？",
      "options": [
          "A. 0",
          "B. 𝝿",
          "C. 2𝝿",
          "D. 3𝝿"
      ],
      "correctAnswer": "C"
  },
  {
      "question": "6. 轉速60rpm，等於",
      "options": [
          "A. 2πrad/sec",
          "B. 360rps",
          "C. πrad/sec",
          "D. 3600rps"
      ],
      "correctAnswer": "A"
  },
  {
      "question": "7. 一電風扇以600rpm轉動，若葉片直徑為40cm，則風扇葉片尖端之切線速度為多少cm/s？",
      "options": [
          "A. 2400π",
          "B. 1600π",
          "C. 800π",
          "D. 400π",
      ],
      "correctAnswer": "D"
  },
  {
      "question": "8. 下列何者是角加速度之單位？",
      "options": [
          "A. m/s2",
          "B. m/s",
          "C. N．m/s",
          "D. rad/s2"
      ],
      "correctAnswer": "D"
  },
  {
      "question": "9. 一質點作圓周運動時，如在切線方向有加速度，這是由於質點什麼改變而產生的？",
      "options": [
          "A. 線速度的大小",
          "B. 線速度的方向",
          "C. 位置",
          "D. 位置及線速度的方向"
      ],
      "correctAnswer": "A"
  },
  {
      "question": "10. 一圓盤作等角加速度轉動，則",
      "options": [
          "A. 有法線加速度，無切線加速度",
          "B. 有切線無法線加速度",
          "C. 同時有法線及切線加速度",
          "D. 無任何加速度"
      ],
      "correctAnswer": "C"
  },
  {
      "question": "11. 若初速一定時，以之15°、75°之仰角拋出二球，則下列何者為真？",
      "options": [
          "A. 15°仰角射程較遠",
          "B. 75°仰角拋射高度較高",
          "C. 拋至最高點速度皆為零",
          "D. 15°仰角飛行時間較長"
      ],
      "correctAnswer": "B"
  },
  {
      "question": "12. 牛頓第二運動定律公式為F＝ma，其中F為作用於物體之力，而m、a則分別為何？",
      "options": [
          "A. m為物體之重量，a為運動速度",
          "B. m為物體之質量，a為運動加速度",
          "C. m為物體之質量，a為運動速度",
          "D. m為物體之重量，a為運動加速度"
      ],
      "correctAnswer": "B"
  },
  {
      "question": "13. 一質量為m的球用一繩索繫之，以等角速度ω做直立圓周運動，如圖所示，若對該繩索在四個位置所受的張力T做比較，則",
      "URL": "https://cdn.discordapp.com/attachments/1129030772154708029/1196426277628956682/image.png?ex=65b795cd&is=65a520cd&hm=da8e5ca66ca70e87fba41b6fcfff472415b77d52c52cb6a267c476ac9ec161b7&",
      "options": [
          "A. T1最大",
          "B. T2最大",
          "C. T3最大",
          "D. T1、T2、T3和T4皆相同"
      ],
      "correctAnswer": "C"
  },
  {
      "question": "14. 靜止於光滑水平面上的物體，受一定的水平力作用，則下列敘述何者錯誤？",
      "options": [
          "A. 加速度為一定值",
          "B. 加速度的方向與作用力方向相同",
          "C. 質量與加速度成正比",
          "D. 作用力與加速度成正比"
      ],
      "correctAnswer": "C"
  },
  {
      "question": "15. 在C.G.S.制中，下列何者為力的絕對單位？",
      "options": [
          "A. kg-m/sec",
          "B. kg-m/sec2",
          "C. g-cm/sec",
          "D. g-cm/sec2"
      ],
      "correctAnswer": "D"
  },
  {
      "question": "16. 物體若不受外力作用或所受外力合力為零時，則靜者恆靜止，動者恆作等速直線運動，這是",
      "options": [
          "A. 虎克定律",
          "B. 牛頓第一運動定律",
          "C. 牛頓第二運動定律",
          "D. 牛頓第三運動定律"
      ],
      "correctAnswer": "B"
  },
  {
      "question": "17. 數力同時作用於一物體，合力為零，則物體必",
      "options": [
          "A. 靜止",
          "B. 等速度運動",
          "C. 等加速度運動",
          "D. 靜止或等速運動"
      ],
      "correctAnswer": "D"
  },
  {
      "question": "18. 何者係利用反作用定律？",
      "options": [
          "A. 火箭噴出廢氣而升空",
          "B. 緊急煞車，車上人向前傾",
          "C. 球受力而向前滾出",
          "D. 拍手以服灰塵掉落"
      ],
      "correctAnswer": "A"
  },
  {
      "question": "19. 一質量為1kg之物體以1m/s之等速度在一水平面上直線前進，則此物體所受到之合力為",
      "options": [
          "A. 1kg向前",
          "B. 9.8kg向前",
          "C. 0kg",
          "D. 1kg向上"
      ],
      "correctAnswer": "C"
  },
  {
      "question": "20. 下列何者較正確描述牛頓第二運動定律？",
      "options": [
          "A. 物體不受外力作用或所受外力之合力為零時，則靜止恆靜，動者恆作等速直線運動",
          "B. 物體受外力作用時，必產生一與作用力大小相等，方向相反之作用力",
          "C. 物體受外力作用時，必沿力之方向產生一加速度，其大小與作用力成正比，與物體之質量成反比",
          "D. 又稱為反作用定律"
      ],
      "correctAnswer": "C"
  },
  {
      "question": "21. 兩球相撞，撞擊前兩球動量之和與撞擊後兩球動量之和相較",
      "options": [
          "A. 撞擊前為撞擊後之二倍",
          "B. 撞擊前較大",
          "C. 撞擊後較大",
          "D. 相等"
      ],
      "correctAnswer": "D"
  },
  {
      "question": "22. A、B兩物體質量分別為M、m，且M＞m，靜置於無摩擦的光滑水平面上，分別以相同大小水平P力向左及向右推，如圖所示，試問有關A、B兩物體間的作用力何者正確？",
      "URL": "https://cdn.discordapp.com/attachments/1196427238166511717/1196428628645380106/image.png?ex=65b797fd&is=65a522fd&hm=035c5facd8c3b6b8a2d1b663993d679c7daf4ad8a95f1774fa7d984a258d0b9a&",
      "options": [
          "",
          "A. (a)圖較(b)圖大",
          "B. (b)圖較(a)圖大",
          "C. (a)(b)兩圖一樣大",
          "D. 無法判斷"
      ],
      "correctAnswer": "A"
  },
  {
      "question": "23. 下列何者敘述錯誤？",
      "options": [
          "A. 物體受力後，若合力為零，則物體必定靜止",
          "B. 物體等速度運動，其運動軌跡必定是直線",
          "C. 等速率運動之物體，若方向改變，必定會產生加速度",
          "D. 兩物體必定要相接觸，才會有機會產生摩擦力"
      ],
      "correctAnswer": "A"
  },
  {
      "question": "24. 如圖所示之滑輪裝置，設滑輪重量忽略，且滑輪與繩之間無摩擦力，已知W＝800N，求繩子A之張力(TA)",
      "URL": "https://cdn.discordapp.com/attachments/1196427238166511717/1196429453652410378/image.png?ex=65b798c2&is=65a523c2&hm=b9144248adf5059c2ef96adbc25b722beb2de7c4779d3aa937f16b296f27bed9&",
      "options": [
          "A. 200N",
          "B. 400N",
          "C. 800N",
          "D. 1600N"
      ],
      "correctAnswer": "A"
  },
  {
      "question": "25. 如圖所示之滑輪系統中，繩索所承受之拉力Tb為",
      "URL": "https://cdn.discordapp.com/attachments/1196427238166511717/1196429560003166249/image.png?ex=65b798db&is=65a523db&hm=979116fcd5bf59c102250682a2ca17026af5a770f1dd9a5c544c29959c0f3bbf&",
      "options": [
          "A. 270N",
          "B. 360N",
          "C. 540N",
          "D. 720N"
      ],
      "correctAnswer": "B"
  },
  {
      "question": "26. 汽車在水平面上轉彎時，接觸面間的摩擦力應",
      "options": [
          "A. 等於離心力",
          "B. 等於汽車重",
          "C. 大於離心力",
          "D. 大於汽車重"
      ],
      "correctAnswer": "A"
  },
  {
      "question": "27. 下列何者不是功的單位？",
      "options": [
          "A. 牛頓-米",
          "B. 焦耳",
          "C. 馬力",
          "D. 爾格 "
      ],
      "correctAnswer": "C"
  },
  {
      "question": "28. 下列何者是純量？",
      "options": [
          "A. 功",
          "B. 力",
          "C. 速度",
          "D. 加速度 "
      ],
      "correctAnswer": "A"
  },
  {
      "question": "29. 下列有關單位的敘述，何者錯誤？",
      "options": [
          "A. 牛頓是力的單位",
          "B. 1kW＝1000瓦特",
          "C. 米／秒2是加速度的單位",
          "D. 焦耳是功率的單位 "
      ],
      "correctAnswer": "D"
  },
  {
      "question": "30. 下列有關功的敘述何者為錯？",
      "options": [
          "A. 功是純量",
          "B. 功有正負之分",
          "C. 功的大小與作功所經歷的時間有關",
          "D. 焦耳是功的單位"
      ],
      "correctAnswer": "C"
  },
  {
      "question": "31. 下列何者不可視為具有能量？",
      "options": [
          "A. 熱",
          "B. 質量",
          "C. 動能",
          "D. 功"
      ],
      "correctAnswer": "B"
  },
  {
      "question": "32. 物體在無空氣阻力下，由地面鉛直往上拋，則在何處的機械能最大？",
      "options": [
          "A. 地面",
          "B. 最高點",
          "C. 距高點一半",
          "D. 一樣大"
      ],
      "correctAnswer": "D"
  },
  {
      "question": "33. 有關物理學上的能量守恆原理，與日常生活中常聽到的能源危機議題之間的彼此關係，下列哪一個觀念才是正確的？",
      "options": [
          "A. 能量守恆原理只有在特殊的狀況下才成立；一般來說，日常生活中能量是越用越少，總有用完之時，故有能源危機",
          "B. 能量守恆原理表示總能量不會減少，由此可知能量是用不完的。所以能源危機的議題只是勸人節省的口號而已",
          "C. 能量守恆原理總是成立的，但是在日常生活中被用來發電或行車的汽油，用過之後變成廢氣和廢熱，不易再重複使用，故有能源危機",
          "D. 由於能量在使用中相互轉換，其總值會減少，故有能源危機"
      ],
      "correctAnswer": "C"
  },
  {
      "question": "34. 將一石子垂直上拋，則動能隨高度上升而",
      "options": [
          "A. 減少",
          "B. 增加",
          "C. 不變",
          "D. 沒有一定變化規則"
      ],
      "correctAnswer": "A"
  },
  {
      "question": "35. 下列有關功的敘述，何者錯誤？",
      "options": [
          "A. 功有大小之分",
          "B. 功有正負之分",
          "C. 功無方向可言",
          "D. 功的單位係由力及速度單位導出"
      ],
      "correctAnswer": "D"
  },
  {
      "question": "36. 有關功率的敘述何者錯誤？",
      "options": [
          "A. 在1秒內作一焦耳的功稱為一瓦特",
          "B. 1000瓦特＝1kW",
          "C. 1公制馬力＝736kgm/s",
          "D. 1瓦特＝1焦耳／秒"
      ],
      "correctAnswer": "C"
  },
  {
      "question": "37. 對於功與功率之單位何者正確？",
      "options": [
          "A. 1焦耳＝1kg-m",
          "B. 1焦耳＝105爾格",
          "C. 1瓦特為：在1秒內作功1焦耳",
          "D. 焦耳為功率之單位"
      ],
      "correctAnswer": "C"
  },
  {
      "question": "38. 1瓦特等於",
      "options": [
          "A. 1Nt-m/s",
          "B. 1kg-m/s",
          "C. 1Nt-m",
          "D. 1kg-m"
      ],
      "correctAnswer": "A"
  },
  {
      "question": "39. 馬力是屬於何種單位？",
      "options": [
          "A. 力",
          "B. 功",
          "C. 能量",
          "D. 功率 "
      ],
      "correctAnswer": "D"
  },
  {
      "question": "40. 彈簧A與彈簧B的彈簧常數相同，當彈簧A拉長1cm，彈簧B拉長2cm，則彈簧B所儲存的彈性位能是彈簧A的幾倍？",
      "options": [
          "A. 1倍",
          "B. 2倍",
          "C. 4倍",
          "D. 8倍"
      ],
      "correctAnswer": "C"
  },
  {
    "question": "41. 兩物體動能相等，則 ",
    "options": [
        "A. (A)較重物體動量較大",
        "B. 較輕物體之動量較大",
        "C. 兩物體之動量亦相同",
        "D. 動量與質量成正比例"
    ],
    "correctAnswer": "A"
},
];

var currentQuestionIndex = 0;
var currentQuizQuestion = 0;
var correctAnswersCount = 0;
var userAnswers = [];
var isRandomizeEnabled = false;

function showQuestions() {
  document.getElementById("questionContainer").style.display = "block";
  document.getElementById("quizContainer").style.display = "none";
  displayAllQuestions();
}

function displayAllQuestions() {
  var questionContainer = document.getElementById("questionContainer");
  questionContainer.innerHTML = "";

  for (var i = 0; i < questions.length; i++) {
      var questionObj = questions[i];
  
      var questionDiv = document.createElement("div");
  
      var questionContent = document.createElement("ul");
      var questionText = questionObj.question;
  
      for (var j = 0; j < questionObj.options.length; j++) {
          var option = questionObj.options[j];
  
          if (j === 0 && questionObj.URL) {
              var image = document.createElement("img");
              image.src = questionObj.URL;
              image.style.maxWidth = "100%";
              option = image.outerHTML + '<br>' + option;
          }
          
          if (questionObj.options[j].startsWith("A.") ||
              questionObj.options[j].startsWith("B.") ||
              questionObj.options[j].startsWith("C.") ||
              questionObj.options[j].startsWith("D.")) {
              
              var optionParts = questionObj.options[j].split('. ');
              var optionText = optionParts[1];
              
              if (optionText.startsWith("https://cdn.discordapp.com/attachments")) {
                  var image = document.createElement("img");
                  image.src = optionText;
                  image.style.maxWidth = "100%";
              
                  option = image.outerHTML;
              }
          }

          if (option.charAt(0) === questionObj.correctAnswer) {
              console.log(option.charAt(0));
              option = '<span style="color:red;">' + option + '</span>';
          }
  
          questionText += document.createElement("br").outerHTML + option;
      }
  
      questionContent.innerHTML += questionText;
  
      questionDiv.appendChild(questionContent);
  
      questionContainer.appendChild(questionDiv);
  
      if (i < questions.length - 1) {
          questionContainer.appendChild(document.createElement("br"));
      }
  }
  
}


function startQuiz() {
  document.getElementById("questionContainer").style.display = "none";
  document.getElementById("quizContainer").style.display = "block";
  
  isRandomizeEnabled = document.getElementById("randomizeCheckbox").checked;
  
  if (isRandomizeEnabled) {
      shuffleQuestions();
  }
  
  currentQuizQuestion = 0;
  displayQuizQuestion();
}

function shuffleQuestions() {
  for (var i = questions.length - 1; i > 0; i--) {
      var j = Math.floor(Math.random() * (i + 1));
      var temp = questions[i];
      questions[i] = questions[j];
      questions[j] = temp;
  }
}

function previousQuestion() {
  if (currentQuizQuestion > 0) {
      currentQuizQuestion--;
      displayQuizQuestion();
  }
}

function nextQuestion() {
  if (currentQuizQuestion < questions.length - 1) {
      currentQuizQuestion++;
      displayQuizQuestion();
  }
}

function displayQuizQuestion() {
  if (currentQuizQuestion < questions.length) {
      var questionObj = questions[currentQuizQuestion];
      document.getElementById("quizQuestion").textContent = questionObj.question;

      var optionsList = document.getElementById("quizOptionsList");
      optionsList.innerHTML = "";

      var previousImage = optionsList.parentNode.querySelector("img");
      if (previousImage) {
          previousImage.remove();
      }

      for (var i = 0; i < questionObj.options.length; i++) {
          var option = questionObj.options[i];
          var listItem = document.createElement("li");
          var radioButton = '<input type="radio" name="q1" value="' + option.charAt(0) + '"> ';
          listItem.innerHTML = radioButton + option;

          listItem.querySelector("input").addEventListener("change", function () {
              userAnswers[currentQuizQuestion] = this.value;
          });

          optionsList.appendChild(listItem);
      }

      if (questionObj.URL) {
          var image = document.createElement("img");
          image.src = questionObj.URL;
          image.style.maxWidth = "100%";
          optionsList.parentNode.insertBefore(image, optionsList.nextSibling);
      }
  } else {
      document.getElementById("quizResult").textContent = "測驗完成";
      document.getElementById("quizSubmitButton").style.display = "none";
  }

  document.getElementById("previousButton").disabled = currentQuizQuestion === 0;
  document.getElementById("nextButton").disabled = currentQuizQuestion === questions.length - 1;
}

function calculateScore() {
  var resultContainer = document.getElementById("quizResult");
  resultContainer.innerHTML = "<h2>結果：</h2><ul>";

  for (var i = 0; i < questions.length; i++) {
      var questionObj = questions[i];
      var userAnswer = userAnswers[i];
      var isCorrect = userAnswer === questionObj.correctAnswer;

      var listItem = "<li>" + questionObj.question + " - <span class='" + (isCorrect ? "correct" : "incorrect") + "'>" + (isCorrect ? "正確" : "錯誤") + "</span>";

      if (!isCorrect) {
          if (questionObj.correctAnswer === 'A') {
              listItem += `<span style="color:blue;"> (正確答案:  ${questionObj.options[0]})`
          } else if (questionObj.correctAnswer === 'B') {
              listItem += `<span style="color:blue;"> (正確答案:  ${questionObj.options[1]})`
          } else if (questionObj.correctAnswer === 'C') {
              listItem += `<span style="color:blue;"> (正確答案:  ${questionObj.options[2]})`
          } else if (questionObj.correctAnswer === 'D') {
              listItem += `<span style="color:blue;"> (正確答案:  ${questionObj.options[3]})`
          }
      } else {
          correctAnswersCount++;
      }

      listItem += "</li>";

      resultContainer.innerHTML += listItem;
  }

  resultContainer.innerHTML += "</ul>";

  var scoreElement = document.getElementById("score");
  scoreElement.textContent = "答對數量: " + correctAnswersCount + "/40";
}
